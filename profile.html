<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Profile - KALIMOVIES</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #121212;
      color: #eee;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    header {
      background: #1f1f1f;
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.8);
      width: 100%;
      margin-bottom: 20px;
    }
    header button {
      background: #ff3c3c;
      border: none;
      color: white;
      padding: 10px 18px;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
    }
    header button:hover { background: #e23030; }
    .profile-card {
      background: #1e1e1e;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 12px rgba(0,0,0,0.7);
      max-width: 400px;
      width: 100%;
      text-align: center;
    }
    .avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      margin-bottom: 15px;
      object-fit: cover;
      border: 3px solid #ff3c3c;
    }
    .profile-card h2 { margin: 10px 0; }
    .profile-card input[type="file"] {
      margin: 10px 0;
      color: white;
    }
    .profile-card input[type="text"], .profile-card input[type="email"] {
      width: 90%;
      padding: 10px;
      margin: 8px 0;
      border: none;
      border-radius: 6px;
      font-size: 14px;
    }
    .profile-card button {
      margin-top: 15px;
      background: #ff3c3c;
      border: none;
      color: white;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
    }
    .profile-card button:hover { background: #e23030; }
    #editSection { margin-top: 15px; }
  </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4697032260913061"
     crossorigin="anonymous"></script>
</head>
<body>
  <header>
    <h1>KALIMOVIES</h1>
    <div>
      <button onclick="window.location.href='index.html'">Home</button>
      <button onclick="window.location.href='browse.html'">Browse</button>
    </div>
    <div id="profileArea"></div>
  </header>

  <div class="profile-card">
    <img src="https://via.placeholder.com/120" alt="Avatar" class="avatar" id="avatarPreview">
    <h2 id="usernameDisplay">Your Name</h2>
    <p id="emailDisplay">your@email.com</p>

    <input type="file" id="avatarInput" accept="image/*">

    <!-- Editing Section -->
    <div id="editSection">
      <input type="text" id="usernameInput" placeholder="Enter new username">
      <input type="email" id="emailInput" placeholder="Enter new email">
      <button onclick="updateProfile()">Sign In / Update Profile</button>
    </div>
    
    <button onclick="logout()" style="margin-top:20px;background:#444;">Logout</button>
  </div>

  <script>
    // Profile Loader for Header
    function loadProfileHeader() {
      const profileArea = document.getElementById('profileArea');
      const savedName = localStorage.getItem('username');
      const savedAvatar = localStorage.getItem('avatar');

      if (savedName && savedAvatar) {
        profileArea.innerHTML = `
          <img src="${savedAvatar}" style="width:35px;height:35px;border-radius:50%;object-fit:cover;border:2px solid #ff3c3c;cursor:pointer;" onclick="window.location.href='profile.html'">
          <span style="margin-left:10px;cursor:pointer;" onclick="window.location.href='profile.html'">${savedName}</span>
        `;
      } else {
        profileArea.innerHTML = `<button onclick="window.location.href='profile.html'">My Profile</button>`;
      }
    }
    loadProfileHeader();

    // Load saved profile in card
    window.onload = function() {
      const savedName = localStorage.getItem('username');
      const savedEmail = localStorage.getItem('email');
      const savedAvatar = localStorage.getItem('avatar');

      if (savedName) {
        document.getElementById('usernameDisplay').textContent = savedName;
        document.getElementById('editSection').style.display = 'none'; // Hide editing section if signed in
      }
      if (savedEmail) document.getElementById('emailDisplay').textContent = savedEmail;
      if (savedAvatar) document.getElementById('avatarPreview').src = savedAvatar;
    }

    // Handle avatar upload
    document.getElementById('avatarInput').addEventListener('change', function(event) {
      const reader = new FileReader();
      reader.onload = function() {
        document.getElementById('avatarPreview').src = reader.result;
        localStorage.setItem('avatar', reader.result);
      }
      reader.readAsDataURL(event.target.files[0]);
    });

    // Update profile info and redirect to Home
    function updateProfile() {
      const username = document.getElementById('usernameInput').value;
      const email = document.getElementById('emailInput').value;

      if (username) {
        document.getElementById('usernameDisplay').textContent = username;
        localStorage.setItem('username', username);
      }
      if (email) {
        document.getElementById('emailDisplay').textContent = email;
        localStorage.setItem('email', email);
      }

      alert("Signed in successfully!");
      window.location.href = 'index.html'; // Redirect to Home
    }

    // Logout Function
    function logout() {
      localStorage.clear();
      alert("You have logged out.");
      window.location.href = 'profile.html';
    }
  </script>
</body>
</html>

